# Фэнтези Лига Мафии

Веб-приложение для создания и управления фэнтези-лигой по игре в мафию. Пользователи могут собирать карточки игроков, формировать команды и участвовать в турнирах.

## Функциональность

- Система регистрации и авторизации пользователей
- Коллекционирование карточек игроков в мафию
- Формирование команды из 4-х игроков
- Участие в турнирах и получение очков
- Магазин для покупки паков с карточками
- Рейтинг игроков
- Админ-панель для управления картами и турнирами

## Технологии

- Python 3.9+
- Flask - веб-фреймворк
- SQLAlchemy - ORM для работы с базой данных
- Flask-Login - управление пользовательскими сессиями
- Bootstrap 5 - фронтенд фреймворк
- SQLite - база данных (можно заменить на PostgreSQL для продакшена)

## Установка и запуск

### Требования

- Python 3.9 или выше
- pip (менеджер пакетов Python)
- Виртуальное окружение (рекомендуется)

### Шаги по установке

1. Клонируйте репозиторий:
```bash
git clone https://github.com/yourusername/mafia-fantasy.git
cd mafia-fantasy
```

2. Создайте и активируйте виртуальное окружение:
```bash
# Для Windows
python -m venv venv
venv\Scripts\activate

# Для macOS/Linux
python3 -m venv venv
source venv/bin/activate
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

4. Создайте базу данных:
```bash
flask shell
```
```python
from app import db
db.create_all()
exit()
```

5. Запустите приложение:
```bash
flask run
```

6. Откройте браузер и перейдите по адресу `http://127.0.0.1:5000/`

## Структура проекта

```
mafia-fantasy/
├── app.py                  # Основной файл приложения
├── requirements.txt        # Зависимости проекта
├── static/                 # Статические файлы
│   ├── css/                # CSS стили
│   ├── js/                 # JavaScript файлы
│   ├── images/             # Изображения
│   └── uploads/            # Загруженные изображения карт
└── templates/              # HTML шаблоны
    ├── admin/              # Шаблоны админ-панели
    ├── auth/               # Шаблоны авторизации
    └── ...                 # Другие шаблоны
```

## Создание администратора

Для создания первого администратора выполните следующие команды:

```bash
flask shell
```
```python
from app import db, User
from werkzeug.security import generate_password_hash

admin = User(
    username='admin',
    email='admin@example.com',
    password_hash=generate_password_hash('adminpassword'),
    coins=10000
)
db.session.add(admin)
db.session.commit()
exit()
```

## Игровая механика

1. **Карточки игроков**:
   - Каждая карточка имеет редкость от 1 до 5 звезд
   - Карточки с более высокой редкостью имеют лучшие характеристики
   - Существуют особые "Прайм" карточки с уникальными способностями

2. **Команда**:
   - Пользователь может иметь до 50 карточек в коллекции
   - В основной состав можно выставить только 4 карточки
   - Остальные карточки остаются в запасе

3. **Турниры**:
   - Проводятся регулярно (например, раз в неделю)
   - Регистрация заканчивается за 12 часов до начала
   - Игроки получают очки в зависимости от занятого места
   - Очки суммируются и формируют рейтинг игроков

4. **Магазин**:
   - Пользователи могут покупать паки с карточками за игровую валюту
   - Разные типы паков имеют разную вероятность выпадения редких карт
   - Стартовый баланс: 1000 монет

## Лицензия

MIT

## Контакты

По всем вопросам обращайтесь: support@mafia-fantasy.ru
